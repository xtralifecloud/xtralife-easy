version: '3.9'

services:
  xtralife-server:
    image: xtralife/xtralife-server:v4.4.6
    ports:
     - "2000:2000"

    volumes:
     - ./config:/server/config
     - ./logs:/server/logs

    environment:
      NODE_ENV: production

    links:
      - redis:redis
      - mongodb:mongodb
      - elastic:elastic

  xtralife-dashboard:
    image: xtralife/xtralife-dashboard:v4.4.5
    ports:
     - "3000:3000"

    volumes:
     - ./configDashboard:/dashboard/configDashboard

    environment:
      NODE_ENV: production

    links:
      - redis:redis
      - mongodb:mongodb
      - elastic:elastic

  redis:
    image: redis:6.2.8
    volumes:
      - ./data/redis:/data

  mongodb:
    image: mongo:4.4.0
    volumes:
     - ./data/db:/data/db
     - ./data/configdb:/data/configdb

  elastic:
    image: elasticsearch:8.8.0
    volumes:
     - ./data/elastic:/usr/share/elasticsearch/data
